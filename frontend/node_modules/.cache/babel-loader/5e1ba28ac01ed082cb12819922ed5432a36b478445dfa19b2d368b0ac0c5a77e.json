{"ast":null,"code":"import _objectSpread from\"C:/Users/succe/Downloads/disasterApp-frontends/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useForm}from'react-hook-form';import{motion}from'framer-motion';import{Mail,Send}from'lucide-react';import toast from'react-hot-toast';import{authAPI}from'../services/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ForgotPassword=()=>{const{register,handleSubmit,formState:{errors}}=useForm();const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const onSubmit=async _ref=>{let{email}=_ref;try{var _res$data;setIsLoading(true);const res=await authAPI.forgotPassword(email);toast.success('Password reset link sent to your email');// Dev flow: if backend returns a mock resetToken, navigate with it\nconst token=(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.resetToken;if(token)navigate(\"/reset-password?token=\".concat(encodeURIComponent(token)));}catch(e){var _e$response,_e$response$data;toast.error(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||'Failed to send reset email');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-dark-900 flex items-center justify-center px-4 py-12\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5},className:\"w-full max-w-md card\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white mb-2\",children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-dark-300 mb-6\",children:\"Enter your email to receive a password reset link.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-dark-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",className:\"input-field pl-10 \".concat(errors.email?'border-red-500':''),placeholder:\"Email address\"},register('email',{required:'Email is required',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:'Invalid email address'}}))),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-red-500\",children:errors.email.message})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full btn-primary flex items-center justify-center\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner h-5 w-5\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4 mr-2\"}),\"Send Reset Link\"]})})]})]})});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","useForm","motion","Mail","Send","toast","authAPI","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ForgotPassword","register","handleSubmit","formState","errors","isLoading","setIsLoading","navigate","onSubmit","_ref","email","_res$data","res","forgotPassword","success","token","data","resetToken","concat","encodeURIComponent","e","_e$response","_e$response$data","error","response","className","children","div","initial","opacity","y","animate","transition","duration","_objectSpread","type","placeholder","required","pattern","value","message","disabled"],"sources":["C:/Users/succe/Downloads/disasterApp-frontends/frontend/src/pages/ForgotPassword.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { motion } from 'framer-motion';\r\nimport { Mail, Send } from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\nimport { authAPI } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst ForgotPassword = () => {\r\n  const { register, handleSubmit, formState: { errors } } = useForm();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const onSubmit = async ({ email }) => {\r\n    try {\r\n      setIsLoading(true);\r\n      const res = await authAPI.forgotPassword(email);\r\n      toast.success('Password reset link sent to your email');\r\n      // Dev flow: if backend returns a mock resetToken, navigate with it\r\n      const token = res.data?.resetToken;\r\n      if (token) navigate(`/reset-password?token=${encodeURIComponent(token)}`);\r\n    } catch (e) {\r\n      toast.error(e.response?.data?.error || 'Failed to send reset email');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-dark-900 flex items-center justify-center px-4 py-12\">\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n        className=\"w-full max-w-md card\"\r\n      >\r\n        <h1 className=\"text-2xl font-bold text-white mb-2\">Forgot Password</h1>\r\n        <p className=\"text-dark-300 mb-6\">Enter your email to receive a password reset link.</p>\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <Mail className=\"h-5 w-5 text-dark-400\" />\r\n            </div>\r\n            <input\r\n              type=\"email\"\r\n              className={`input-field pl-10 ${errors.email ? 'border-red-500' : ''}`}\r\n              placeholder=\"Email address\"\r\n              {...register('email', {\r\n                required: 'Email is required',\r\n                pattern: {\r\n                  value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                  message: 'Invalid email address',\r\n                },\r\n              })}\r\n            />\r\n            {errors.email && (\r\n              <p className=\"mt-1 text-sm text-red-500\">{errors.email.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className=\"w-full btn-primary flex items-center justify-center\"\r\n          >\r\n            {isLoading ? <div className=\"loading-spinner h-5 w-5\" /> : <><Send className=\"w-4 h-4 mr-2\" />Send Reset Link</>}\r\n          </button>\r\n        </form>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}